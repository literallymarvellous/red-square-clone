import type { GetStaticProps, NextPage } from "next";
import Head from "next/head";
import styled from "styled-components";
import Footer from "../components/Footer/Footer";
import Header from "../components/Header/Header";
import VideoReel from "../components/VIdeoReel/VideoReel";
import { QUERIES } from "../constants";
import fs from "fs";
import Backdrop from "../components/Backdrop/Backdrop";
import NugsModal from "../components/NugsModal/NugsModal";
import { usePageContext } from "../hooks/pageContext";

type HomeProps = {
  title: string;
  images: string[];
};

const Home: NextPage<HomeProps> = ({ title, images }) => {
  const context = usePageContext();
  const toggleModal = context.toggleModal;

  return (
    <PageWrapper>
      <Head>
        <title>{title === "Home" ? "Red Square Agency Clone" : null}</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <Header pageTitle={title == "Home" ? "Work" : "Red Square"} />
      <main>
        <Wrapper>
          <Heading>
            The agency for <br /> what comes next.
          </Heading>

          <ReelSection>
            <VideoReelWrapper>
              <VideoReel images={images} />
            </VideoReelWrapper>
          </ReelSection>

          <section>
            <Paragraph>
              We deal in ideas, design and media that are category defying. When
              the world Millis, you&#39;ve got to Vanilli.
            </Paragraph>

            <SecondParagraph>
              Red Square believes in rigorous development of brand strategy and
              whip-smart execution. We make all sorts of things. Things that
              move markets, compel audiences and sell product. We help great
              brands create what comes next.
            </SecondParagraph>
          </section>

          <Line />
          <ClientSection>
            <ListHeading>Select Clients</ListHeading>
            <ListWrapper>
              <List>
                <li>Cherokee Casinos</li>
                <li>Flipboard</li>
                <li>Foxwoods</li>
                <li>Glanbia Nutritionals</li>
                <li>Google</li>
                <li>Hard Rock</li>
                <li>Hibbett Sports</li>
                <li>Hilton Worldwide</li>
                <li>Jack Daniel&#39;s</li>
              </List>
              <List>
                <li>Nescaf√©</li>
                <li>New York Pride</li>
                <li>Patreon</li>
                <li>Rivers Casino</li>
                <li>Snickers</li>
                <li>Southern Comfort</li>
                <li>The University of Alabama</li>
                <li>Twix</li>
                <li>Wind Creek Hospitality</li>
              </List>
            </ListWrapper>
          </ClientSection>
          <Line />
        </Wrapper>
      </main>
      <Footer pageTitle={title == "Home" ? "Work" : "Red Square"} />

      <NugsModal toggleModal={toggleModal} />

      <Backdrop />
    </PageWrapper>
  );
};

Home.defaultProps = {
  title: "Home",
};

const PageWrapper = styled.div`
  height: 100%;
  position: relative;
`;

const Wrapper = styled.div`
  padding-inline: var(--mobile-padding-inline);
  color: var(--color-white);

  @media ${QUERIES.phoneAndBigger} {
    padding-inline: var(--tablet-padding-inline);
  }

  @media ${QUERIES.tabletAndBigger} {
    padding-inline: calc(var(--laptop-padding-inline) * 1.6);
  }

  @media ${QUERIES.laptopAndBigger} {
    padding-inline: calc(var(--desktop-padding-inline) * 1.15);
  }

  @media ${QUERIES.desktop} {
    padding-inline: calc(var(--desktop-padding-inline) * 1.55);
  }
`;

const Heading = styled.h1`
  padding-top: clamp(11rem, 46vw, 13.5rem);
  font-family: var(--font-volkhov);
  font-size: 2.3rem;
  font-weight: 700;
  line-height: 1.3;

  @media ${QUERIES.phoneAndBigger} {
    font-size: clamp(2.3rem, 7vw, 4.3rem);
    line-height: 1.2;
    padding-top: calc(13.5rem - 10vw);
    padding-bottom: clamp(1rem, 5vw, 6rem);
  }

  @media ${QUERIES.tabletAndBigger} {
    font-size: clamp(4.3rem, 7.2vw, 7rem);
    line-height: 1;
  }
`;

const ReelSection = styled.div`
  padding-top: clamp(2rem, 9vw, 4rem);
  padding-bottom: 28px;
  margin-inline: calc(var(--mobile-padding-inline) * -1);

  @media ${QUERIES.phoneAndBigger} {
    margin-inline: calc(var(--tablet-padding-inline) * -1);
  }

  @media ${QUERIES.tabletAndBigger} {
    margin-inline: calc(var(--laptop-padding-inline) * 1.35 * -1);
  }
`;

const VideoReelWrapper = styled.div`
  width: 100%;
  height: clamp(190px, 55vw, 700px);
  overflow: hidden;
  transition: transform 200ms ease-in;
  will-change: transform;

  &:hover {
    transform: scale(0.99);
    transition: transform 200ms ease-out;
  }
`;

const Paragraph = styled.p`
  font-family: var(--font-poppins);
  font-size: 1.7rem;
  line-height: 1.5;
  padding-block: 36px;
  font-weight: 600;

  @media ${QUERIES.phoneAndBigger} {
    font-size: 2.8rem;
    line-height: 1.4;
  }
`;

const SecondParagraph = styled.p`
  padding-bottom: 36px;
  font-family: var(--font-poppins);
  font-size: 1.3rem;
  font-weight: 500;
  line-height: 1.5;

  @media ${QUERIES.phoneAndBigger} {
    padding-bottom: calc(48px + 2vw);
    font-size: 1.5rem;
    line-height: 1.7;
  }
`;

const Line = styled.div`
  margin: 0;
  padding: 0;
  height: 0.1px;
  background-color: var(--color-gray);
  filter: opacity(0.5);
`;

const ClientSection = styled.section`
  padding: 56px 0 72px 0;

  @media ${QUERIES.tabletAndBigger} {
    display: grid;
    grid-template-columns: 2fr 3fr;
    padding-top: calc(56px + 2.5vw);
    padding-bottom: calc(72px + 3.6vw);
  }
`;

const ListWrapper = styled.ul`
  padding-inline: 0;

  @media ${QUERIES.phoneAndBigger} {
    display: flex;
    gap: 180px;
  }

  @media ${QUERIES.tabletAndBigger} {
    justify-content: space-between;
    gap: 32px;
  }
`;

const ListHeading = styled.div`
  font-family: var(--font-poppins);
  color: var(--color-gray);
  font-size: 1.1rem;
  font-weight: 300;
  padding-bottom: 12px;
`;

const List = styled.ul`
  list-style: none;
  padding-inline: 0;

  li {
    font-family: var(--font-poppins);
    font-size: 1.3rem;
    line-height: 1.9;
  }

  @media ${QUERIES.tabletAndBigger} {
    li {
      font-size: calc(1.1rem + 0.2vw);
      line-height: calc(2 * 1.6vw);
    }
  }

  @media ${QUERIES.laptopAndBigger} {
    font-size: calc(1.2rem + 0.25vw);
  }
`;

export const getStaticProps: GetStaticProps = async () => {
  const imagesPath = "./public/images";
  let images = fs.readdirSync(imagesPath);
  return {
    props: {
      images,
    },
  };
};

export default Home;
